{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "decrypted-text",
  "type": "registry:ui",
  "dependencies": [
    "tempus"
  ],
  "files": [
    {
      "path": "src/registry/default/ui/decrypted-text.tsx",
      "content": "\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useTempus } from \"tempus/react\";\n\nconst CHARS =\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!@#$%^&*()_+\";\n\nfunction easeInOutQuint(x: number): number {\n  return x < 0.5 ? 16 * x * x * x * x * x : 1 - (-2 * x + 2) ** 5 / 2;\n}\n\ninterface DecryptedCharProps {\n  char: string;\n  startTime: number;\n  isAnimating: boolean;\n  updateRate: number;\n  charDuration: number;\n  chars: string;\n}\nfunction DecryptedChar({\n  char,\n  startTime,\n  isAnimating,\n  updateRate,\n  charDuration,\n  chars,\n}: DecryptedCharProps) {\n  const [displayChar, setDisplayChar] = useState(char);\n  const [opacity, setOpacity] = useState(1);\n\n  useTempus((time) => {\n    if (!isAnimating) {\n      if (displayChar !== char) {\n        setDisplayChar(char);\n      }\n      if (opacity !== 1) {\n        setOpacity(1);\n      }\n      return;\n    }\n\n    if (time < startTime) {\n      return;\n    }\n\n    const elapsed = time - startTime;\n\n    const progress = Math.min(elapsed / charDuration, 1);\n    const easedProgress = easeInOutQuint(progress);\n\n    if (elapsed < charDuration) {\n      const currentUpdateRate = updateRate + updateRate * 3 * easedProgress;\n\n      if (elapsed % currentUpdateRate < 16) {\n        const randomChar = chars[Math.floor(Math.random() * chars.length)];\n        setDisplayChar(randomChar);\n      }\n\n      setOpacity(0.4);\n    } else {\n      if (opacity !== 1) {\n        setOpacity(1);\n      }\n      if (displayChar !== char) {\n        setDisplayChar(char);\n      }\n    }\n  });\n\n  return (\n    <span\n      style={{ opacity }}\n      className=\"transition-opacity duration-150 ease-in-out\"\n    >\n      {displayChar}\n    </span>\n  );\n}\n\nexport interface DecryptedTextProps {\n  text: string;\n  chars?: string;\n  stagger?: number;\n  updateRate?: number;\n  charDuration?: number;\n}\n\nexport default function DecryptedText({\n  text,\n  stagger = 16,\n  updateRate = 16,\n  charDuration = 500,\n  chars = CHARS,\n}: DecryptedTextProps) {\n  const [isHovered, setIsHovered] = useState(false);\n  const [hoverStartTime, setHoverStartTime] = useState<number>(0);\n\n  const characters = useMemo(() => {\n    return text.split(\"\").map((char, i) => ({\n      char,\n      index: i,\n    }));\n  }, [text]);\n\n  useTempus((time) => {\n    if (isHovered && hoverStartTime === 0) {\n      setHoverStartTime(time);\n    }\n  });\n\n  useEffect(() => {\n    if (!isHovered) {\n      setHoverStartTime(0);\n    }\n  }, [isHovered]);\n\n  return (\n    <button\n      type=\"button\"\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      className=\"cursor-pointer p-4 font-mono\"\n    >\n      {characters.map(({ char, index }) => (\n        <DecryptedChar\n          key={index}\n          char={char}\n          chars={chars}\n          updateRate={updateRate}\n          charDuration={charDuration}\n          startTime={hoverStartTime + index * stagger}\n          isAnimating={isHovered}\n        />\n      ))}\n    </button>\n  );\n}\n",
      "type": "registry:ui"
    }
  ]
}